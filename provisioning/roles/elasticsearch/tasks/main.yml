---
- name: Install JRE
  yum: name=default-jre state=latest
  tags:
    - elasticsearch

- name: Install JDK
  yum: name=default-jdk state=latest
  tags:
    - elasticsearch

- name: Download Elasticsearch .rpm
  get_url:
    url: "https://download.elastic.co/elasticsearch/release/org/elasticsearch/distribution/deb/elasticsearch/{{ elasticsearch_version }}/elasticsearch-{{ elasticsearch_version }}.deb"
    dest: /root/elasticsearch-{{ elasticsearch_version }}.rpm
  tags:
    - elasticsearch

- name: Install Elasticsearch
  command: rpm -ivh /root/elasticsearch-{{ elasticsearch_version }}.rpm
  tags:
    - elasticsearch

- name: Ensure Elasticsearch service is up
  action: service name=elasticsearch state=started enabled=yes
  tags:
    - elasticsearch
